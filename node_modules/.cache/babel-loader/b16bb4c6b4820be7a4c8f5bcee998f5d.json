{"remainingRequest":"G:\\JDdemo\\jd\\node_modules\\babel-loader\\lib\\index.js!G:\\JDdemo\\jd\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!G:\\JDdemo\\jd\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\JDdemo\\jd\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\JDdemo\\jd\\src\\views\\shop\\Content.vue?vue&type=template&id=5fe3c94c","dependencies":[{"path":"G:\\JDdemo\\jd\\src\\views\\shop\\Content.vue","mtime":1619078397109},{"path":"G:\\JDdemo\\jd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\JDdemo\\jd\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\JDdemo\\jd\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1616796459000},{"path":"G:\\JDdemo\\jd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\JDdemo\\jd\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUgfSBmcm9tICJ2dWUiOwp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImNvbnRlbnQiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY2F0ZWdvcnkiCn07CnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAicHJvZHVjdCIKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX19kZXRhaWwiCn07CnZhciBfaG9pc3RlZF81ID0gewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9fdGl0bGUiCn07CnZhciBfaG9pc3RlZF82ID0gewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9fc2FsZXMiCn07CnZhciBfaG9pc3RlZF83ID0gewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9fcHJpY2UiCn07Cgp2YXIgX2hvaXN0ZWRfOCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoInNwYW4iLCB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX195ZW4iCn0sICLCpSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF85ID0gewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9fb3JpZ2luIgp9Owp2YXIgX2hvaXN0ZWRfMTAgPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19udW1iZXIiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5jYXRlZ29yaWVzLCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICAgIGNsYXNzOiB7CiAgICAgICAgY2F0ZWdvcnlfX2l0ZW06IHRydWUsCiAgICAgICAgJ2NhdGVnb3J5X19pdGVtLS1hY3RpdmUnOiAkc2V0dXAuY3VycmVudFRhYiA9PT0gaXRlbS50YWIKICAgICAgfSwKICAgICAga2V5OiBpdGVtLm5hbWUsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuICRzZXR1cC5oYW5kbGVUYWJDbGljayhpdGVtLnRhYik7CiAgICAgIH0KICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5uYW1lKSwgMTEKICAgIC8qIFRFWFQsIENMQVNTLCBQUk9QUyAqLwogICAgLCBbIm9uQ2xpY2siXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5saXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgdmFyIF8kc2V0dXAkY2FydExpc3QsIF8kc2V0dXAkY2FydExpc3QkJHNldCwgXyRzZXR1cCRjYXJ0TGlzdCQkc2V0MjsKCiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIHsKICAgICAgY2xhc3M6ICJwcm9kdWN0X19pdGVtIiwKICAgICAga2V5OiBpdGVtLl9pZAogICAgfSwgW19jcmVhdGVWTm9kZSgiaW1nIiwgewogICAgICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX2ltZyIsCiAgICAgIHNyYzogaXRlbS5pbWdVcmwKICAgIH0sIG51bGwsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsic3JjIl0pLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlVk5vZGUoImg0IiwgX2hvaXN0ZWRfNSwgX3RvRGlzcGxheVN0cmluZyhpdGVtLm5hbWUpLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlVk5vZGUoInAiLCBfaG9pc3RlZF82LCAi5pyI5ZSuICIgKyBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0uc2FsZXMpICsgIiDku7YiLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlVk5vZGUoInAiLCBfaG9pc3RlZF83LCBbX2hvaXN0ZWRfOCwgX2NyZWF0ZVRleHRWTm9kZShfdG9EaXNwbGF5U3RyaW5nKGl0ZW0ucHJpY2UpICsgIiAiLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlVk5vZGUoInNwYW4iLCBfaG9pc3RlZF85LCAiwqUiICsgX3RvRGlzcGxheVN0cmluZyhpdGVtLm9sZFByaWNlKSwgMQogICAgLyogVEVYVCAqLwogICAgKV0pXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTAsIFtfY3JlYXRlVk5vZGUoInNwYW4iLCB7CiAgICAgIGNsYXNzOiAicHJvZHVjdF9fbnVtYmVyX19taW51cyIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgJHNldHVwLmNoYW5nZUNhcnRJdGVtSW5mbygkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCwgaXRlbSwgLTEpOwogICAgICB9CiAgICB9LCAiLSIsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsib25DbGljayJdKSwgX2NyZWF0ZVRleHRWTm9kZSgiICIgKyBfdG9EaXNwbGF5U3RyaW5nKCgoXyRzZXR1cCRjYXJ0TGlzdCA9ICRzZXR1cC5jYXJ0TGlzdCkgPT09IG51bGwgfHwgXyRzZXR1cCRjYXJ0TGlzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF8kc2V0dXAkY2FydExpc3QkJHNldCA9IF8kc2V0dXAkY2FydExpc3RbJHNldHVwLnNob3BJZF0pID09PSBudWxsIHx8IF8kc2V0dXAkY2FydExpc3QkJHNldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF8kc2V0dXAkY2FydExpc3QkJHNldDIgPSBfJHNldHVwJGNhcnRMaXN0JCRzZXRbaXRlbS5faWRdKSA9PT0gbnVsbCB8fCBfJHNldHVwJGNhcnRMaXN0JCRzZXQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfJHNldHVwJGNhcnRMaXN0JCRzZXQyLmNvdW50KSB8fCAwKSArICIgIiwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZVZOb2RlKCJzcGFuIiwgewogICAgICBjbGFzczogInByb2R1Y3RfX251bWJlcl9fcGx1cyIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgJHNldHVwLmNoYW5nZUNhcnRJdGVtSW5mbygkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCwgaXRlbSwgMSk7CiAgICAgIH0KICAgIH0sICIrIiwgOAogICAgLyogUFJPUFMgKi8KICAgICwgWyJvbkNsaWNrIl0pXSldKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0pXSk7Cn0="},{"version":3,"sources":["G:\\JDdemo\\jd\\src\\views\\shop\\Content.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"category\">\r\n      <div\r\n        :class=\"{\r\n          category__item: true,\r\n          'category__item--active': currentTab === item.tab,\r\n        }\"\r\n        v-for=\"item in categories\"\r\n        :key=\"item.name\"\r\n        @click=\"() => handleTabClick(item.tab)\"\r\n      >\r\n        {{ item.name }}\r\n      </div>\r\n    </div>\r\n    <div class=\"product\">\r\n      <div class=\"product__item\" v-for=\"item in list\" :key=\"item._id\">\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"product__item__detail\">\r\n          <h4 class=\"product__item__title\">{{ item.name }}</h4>\r\n          <p class=\"product__item__sales\">月售 {{ item.sales }} 件</p>\r\n          <p class=\"product__item__price\">\r\n            <span class=\"product__item__yen\">&yen;</span>{{ item.price }}\r\n            <span class=\"product__item__origin\">&yen;{{ item.oldPrice }}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"product__number\">\r\n          <span\r\n            class=\"product__number__minus\"\r\n            @click=\"\r\n              () => {\r\n                changeCartItemInfo(shopId, item._id, item, -1);\r\n              }\r\n            \"\r\n            >-</span\r\n          >\r\n          {{ cartList?.[shopId]?.[item._id]?.count || 0 }}\r\n          <span\r\n            class=\"product__number__plus\"\r\n            @click=\"\r\n              () => {\r\n                changeCartItemInfo(shopId, item._id, item, 1);\r\n              }\r\n            \"\r\n            >+</span\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, ref, watchEffect } from \"vue\";\r\nimport { get } from \"../../utils/request\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useCommonCartEffect } from \"./commonCartEffect\";\r\n\r\nconst categories = [\r\n  { name: \"全部商品\", tab: \"all\" },\r\n  { name: \"秒杀\", tab: \"seckill\" },\r\n  { name: \"新鲜水果\", tab: \"fruit\" },\r\n];\r\n\r\n//切换的逻辑方法\r\nconst useTabEffect = () => {\r\n  const currentTab = ref(categories[0].tab);\r\n  const handleCategoryClick = (tab) => {\r\n    // console.log(tab);\r\n    // getContentData(tab)\r\n    currentTab = tab;\r\n  };\r\n  return { currentTab, handleTabClick };\r\n};\r\n\r\n//列表逻辑\r\nconst useCurrentListEffect = (currentTab, shopId) => {\r\n  const content = reactive({ list: [] });\r\n  const getContentData = async () => {\r\n    const result = await get(`/api/shop/${shopId}/products`, {\r\n      tab: currentTab.value,\r\n    });\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      content.List = result.data;\r\n    }\r\n  };\r\n  watchEffect(() => {\r\n    getContentData();\r\n  });\r\n  const { list } = toRefs(content);\r\n  return { list };\r\n};\r\n\r\nexport default {\r\n  name: \"Content\",\r\n  setup() {\r\n    const route = useRoute();\r\n    const shopId = route.params.id;\r\n    const { currentTab, handleTabClick } = useTabEffect();\r\n    const { list } = useCurrentListEffect(currentTab, shopId);\r\n    const { changeCartItemInfo, cartList } = useCommonCartEffect();\r\n    return {\r\n      categories,\r\n      currentTab,\r\n      handleTabClick,\r\n      list,\r\n      shopId,\r\n      changeCartItemInfo,\r\n      cartList,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n"],"sourceRoot":""}]}